<!-- <div class="container">
  <h1 class="mt-3">Add BlogPost</h1>
  <form #form="ngForm" (ngSubmit)="onFormSubmit()">
    <div class="mt-2 mb-5">
      <div class="mt-3">
        <label for="title" class="form-label">Title</label>
        <input
          [(ngModel)]="model.title"
          type="text"
          name="title"
          id="title"
          class="form-control"
        />
      </div>

      <div class="mt-3">
        <label for="urlHandle" class="form-label">Url Handle</label>
        <input
          [(ngModel)]="model.urlHandle"
          type="text"
          name="urlHandle"
          id="urlHandle"
          class="form-control"
        />
      </div>

      <div class="mt-3">
        <label for="shortDescription" class="form-label"
          >Short Description</label
        >
        <input
          [(ngModel)]="model.shortDescription"
          type="text"
          name="shortDescription"
          id="shortDescription"
          class="form-control"
        />
      </div>

      <div class="mt-3">
        <label for="content" class="form-label">Content</label>
        <div class="d-flex flex-row">
          <div class="col-6 p-2">
            <textarea
              name="content"
              id="content"
              class="form-control"
              style="height: 350px; max-height: 350px"
              [(ngModel)]="model.content"
            ></textarea>
          </div>
          <div class="col-6 p-2" style="max-height: 350px; overflow-y: scroll">
            <markdown [data]="model.content"></markdown>
          </div>
        </div>
      </div>

      <div class="mt-3">
        <label for="featuredImageUrl" class="form-label">
          Featured Image Url
          <button
              type="button"
              class="btn btn-light"
              (click)="openImageSelector()"
            >
              Select Image
            </button>
        </label>

        <ng-container *ngIf="model.featuredImageUrl !== ''">
          <div>
            <img [src]="model.featuredImageUrl" height="100" class="my-2" />
          </div>
        </ng-container>

        <input
          [(ngModel)]="model.featuredImageUrl"
          type="text"
          name="featuredImageUrl"
          id="featuredImageUrl"
          class="form-control"
        />
      </div>

      <div class="mt-3">
        <label for="publishedDate" class="form-label">Published Date</label>
        <input
          [(ngModel)]="model.publishedDate"
          type="date"
          name="publishedDate"
          id="publishedDate"
          class="form-control"
        />
      </div>

      <div class="mt-3">
        <label for="author" class="form-label">Author</label>
        <input
          [(ngModel)]="model.author"
          type="text"
          name="author"
          id="author"
          class="form-control"
        />
      </div>

      <div class="form-check mt-3">
        <input
          [(ngModel)]="model.isVisible"
          name="isVisible"
          class="form-check-input"
          type="checkbox"
          id="isVisible"
        />
        <label class="form-check-label" for="isVisible"> Is Visible? </label>
      </div>

      <div class="mt-3">
        <label for="categories" class="form-label">Categories</label>
        <ng-container *ngIf="categories$ | async as categories">
          <select
            [(ngModel)]="model.categories"
            name="categories"
            id="categories"
            class="form-control"
            multiple
          >
            <option *ngFor="let category of categories" [value]="category.id">
              {{ category.name }}
            </option>
          </select>
        </ng-container>
      </div>

      <div class="mt-3">
        <button type="submit" class="btn btn-primary">Save</button>
      </div>
    </div>
  </form>
</div>

<div
  class="images-container-modal"
  [ngClass]="{
    'd-block': isImageSelectorVisible,
    'd-none': !isImageSelectorVisible
  }"
>
  <button
    (click)="closeImageSelector()"
    type="button"
    class="btn btn-light"
    style="position: fixed; top: 10px; right: 10px"
  >
    X
  </button>
  <app-image-selector></app-image-selector>
</div>
 -->
<div class="container py-4">
  <div class="row justify-content-center">
    <div class="col-lg-10">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h2 fw-bold text-dark">Create Blog Post</h1>
        <a routerLink="/admin/blogposts" class="btn btn-outline-secondary">
          <i class="bi bi-arrow-left me-2"></i>Back to List
        </a>
      </div>

      <div class="card border-0 shadow-sm mb-4">
        <div class="card-body p-4">
          <form #form="ngForm" (ngSubmit)="onFormSubmit()">
            <!-- Basic Information Section -->
            <div class="mb-4">
              <h5 class="fw-semibold mb-3 pb-2 border-bottom">
                Basic Information
              </h5>
              <div class="row g-3">
                <div class="col-md-6">
                  <label for="title" class="form-label">Title*</label>
                  <input
                    [(ngModel)]="model.title"
                    type="text"
                    name="title"
                    id="title"
                    class="form-control form-control-lg"
                    required
                  />
                </div>
                <div class="col-md-6">
                  <label for="urlHandle" class="form-label">URL Handle*</label>
                  <input
                    [(ngModel)]="model.urlHandle"
                    type="text"
                    name="urlHandle"
                    id="urlHandle"
                    class="form-control form-control-lg"
                    required
                  />
                </div>
                <div class="col-12">
                  <label for="shortDescription" class="form-label"
                    >Short Description*</label
                  >
                  <input
                    [(ngModel)]="model.shortDescription"
                    type="text"
                    name="shortDescription"
                    id="shortDescription"
                    class="form-control"
                    required
                  />
                  <div class="form-text">
                    This will appear in blog listings and previews
                  </div>
                </div>
              </div>
            </div>

            <!-- Content Section -->
            <div class="mb-4">
              <h5 class="fw-semibold mb-3 pb-2 border-bottom">Content</h5>
              <label for="content" class="form-label">Content*</label>
              <div class="row g-3">
                <div class="col-md-6">
                  <div class="border rounded p-2" style="min-height: 400px">
                    <textarea
                      name="content"
                      id="content"
                      class="form-control h-100 border-0"
                      [(ngModel)]="model.content"
                      required
                    ></textarea>
                  </div>
                  <div class="form-text">Write in Markdown format</div>
                </div>
                <div class="col-md-6">
                  <div
                    class="border rounded p-3 bg-light"
                    style="min-height: 400px; overflow-y: auto"
                  >
                    <markdown
                      [data]="model.content || '*Nothing to preview yet*'"
                    ></markdown>
                  </div>
                  <div class="form-text">Live preview</div>
                </div>
              </div>
            </div>

            <!-- Media Section -->
            <div class="mb-4">
              <h5 class="fw-semibold mb-3 pb-2 border-bottom">Media</h5>
              <label for="featuredImageUrl" class="form-label"
                >Featured Image</label
              >
              <div class="input-group mb-2">
                <input
                  [(ngModel)]="model.featuredImageUrl"
                  type="text"
                  name="featuredImageUrl"
                  id="featuredImageUrl"
                  class="form-control"
                />
                <button
                  type="button"
                  class="btn btn-outline-primary"
                  (click)="openImageSelector()"
                >
                  <i class="bi bi-image me-1"></i>Select Image
                </button>
              </div>
              <ng-container *ngIf="model.featuredImageUrl">
                <div class="d-flex align-items-center mt-2">
                  <img
                    [src]="model.featuredImageUrl"
                    height="80"
                    class="rounded me-3 border"
                  />
                  <button
                    type="button"
                    class="btn btn-sm btn-outline-danger"
                    (click)="model.featuredImageUrl = ''"
                  >
                    <i class="bi bi-trash"></i> Remove
                  </button>
                </div>
              </ng-container>
            </div>

            <!-- Metadata Section -->
            <div class="mb-4">
              <h5 class="fw-semibold mb-3 pb-2 border-bottom">Metadata</h5>
              <div class="row g-3">
                <div class="col-md-6">
                  <label for="publishedDate" class="form-label"
                    >Published Date</label
                  >
                  <input
                    [(ngModel)]="model.publishedDate"
                    type="date"
                    name="publishedDate"
                    id="publishedDate"
                    class="form-control"
                  />
                </div>
                <div class="col-md-6">
                  <label for="author" class="form-label">Author</label>
                  <input
                    [(ngModel)]="model.author"
                    type="text"
                    name="author"
                    id="author"
                    class="form-control"
                  />
                </div>
                <div class="col-12">
                  <div class="form-check form-switch">
                    <input
                      [(ngModel)]="model.isVisible"
                      name="isVisible"
                      class="form-check-input"
                      type="checkbox"
                      id="isVisible"
                      style="width: 3em; height: 1.5em"
                    />
                    <label class="form-check-label" for="isVisible"
                      >Make this post visible</label
                    >
                  </div>
                </div>
              </div>
            </div>

            <!-- Categories Section -->
            <div class="mb-4">
              <h5 class="fw-semibold mb-3 pb-2 border-bottom">Categories</h5>
              <label for="categories" class="form-label"
                >Select Categories</label
              >
              <ng-container *ngIf="categories$ | async as categories">
                <select
                  [(ngModel)]="model.categories"
                  name="categories"
                  id="categories"
                  class="form-select"
                  multiple
                  size="4"
                >
                  <option
                    *ngFor="let category of categories"
                    [value]="category.id"
                  >
                    {{ category.name }}
                  </option>
                </select>
                <div class="form-text">
                  Hold Ctrl/Cmd to select multiple categories
                </div>
              </ng-container>
            </div>

            <!-- Form Actions -->
            <div class="d-flex justify-content-end gap-2 pt-3 border-top">
              <button
                type="button"
                routerLink="/admin/blogposts"
                class="btn btn-outline-secondary px-4"
              >
                Cancel
              </button>
              <button type="submit" class="btn btn-primary px-4">
                <i class="bi bi-save me-2"></i>Save Post
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Image Selector Modal -->
<div
  class="modal fade"
  [class.show]="isImageSelectorVisible"
  [style.display]="isImageSelectorVisible ? 'block' : 'none'"
>
  <div class="modal-dialog modal-xl modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Select Image</h5>
        <button
          type="button"
          class="btn-close"
          (click)="closeImageSelector()"
        ></button>
      </div>
      <div class="modal-body">
        <app-image-selector></app-image-selector>
      </div>
    </div>
  </div>
</div>
<div
  class="modal-backdrop fade"
  [class.show]="isImageSelectorVisible"
  [style.display]="isImageSelectorVisible ? 'block' : 'none'"
></div>
